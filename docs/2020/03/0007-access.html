<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html lang='en'>
  <head>
    <meta charset='utf-8' />
    <title>
    </title>
    <link rel='alternate' href='/lisp-project-of-the-day/rss.xml' type='application/rss+xml' />
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-162105820-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
  
    gtag('config', 'UA-162105820-1');
  </script>
  
    <link type='text/css' rel='stylesheet' href='https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css' />
    <script src='https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js'></script>
    <script src='https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js'></script>
    <link rel='stylesheet' href='../../highlight/styles/tomorrow-night.css' />
    <script src='../../highlight/highlight.pack.js'></script>
    <script>hljs.initHighlightingOnLoad();
    </script>
  </head>
  <body><div class='container'><div class='row'><header><h1 style='text-align: center'><a href='../../index.html'>Lisp Project of the Day</a></h1><h2 style='text-align: center'>access</h2></header><div class='col-md-12 col-md-offset-0'><p>This library brings a helper to access nested data structures.</p>
<p>It has a fairly detailed readme with examples.</p>
<p>I've prepared one example for you:</p>
<pre><code class=' lisp'>POFTHEDAY&gt; (defparameter obj
               (make-instance &#039;foo
                              :bar (make-hash-table)))

;; Now we will access a slot &#039;bar inside the object:
POFTHEDAY&gt; (access:accesses *obj* &#039;bar)
#&lt;HASH-TABLE :TEST EQL :COUNT 0 {1007D39263}&gt;

;; Now we go deeper and access an item :some
;; inside this hash-table:
POFTHEDAY&gt; (access:accesses *obj* &#039;bar :some)
NIL

;; Accessor is allow us to use setf and it will automatically
;; create all intermediate nodes:
POFTHEDAY&gt; (setf (access:accesses *obj* &#039;bar :some)
                 &quot;Hello world&quot;)
&quot;Hello world&quot;

;; Here is our result:
POFTHEDAY&gt; (access:accesses *obj* &#039;bar :some)
&quot;Hello world&quot;

POFTHEDAY&gt; (loop for key being the hash-keys in (get-bar *obj*)
                   using (hash-value value)
                 collect (cons key value))
((:SOME . &quot;Hello world&quot;))</code></pre><p>It is able to access CLOS slots, plists, array items, hash keys, etc.</p>
<p>Also, 'access' supports a reader syntax with a dotted notation, but I prefer to use a shorter macro ->:</p>
<pre><code class=' lisp'>(defmacro -&gt; (obj &amp;rest path)
  `(access:accesses ,obj ,@path))

;; Somewhere in the code:

(defcached get-stock-name (ticker)
  (-&gt; (%get-stock-data ticker)
      :|payload|
      :|symbol|
      :|showName|))</code></pre><p>Usually, I use 'access' to process plists results from a Jonathan - JSON parser. But it should be very convenient for accessing other data structures too.</p>
</div><footer class='clearfix'><hr /><center><p>Brought to you by 40Ants under&nbsp;<a rel='license' href='http://creativecommons.org/licenses/by-sa/4.0/'><img alt='Creative Commons License' style='border-width:0' src='https://i.creativecommons.org/l/by-sa/4.0/88x31.png' /></a></p></center></footer></div></div>
  </body>
</html>