<!DOCTYPE html>

<html lang='en'>
  <head>
    <meta charset='utf-8'>
    <title>
    </title>
    <link type='text/css' rel='stylesheet' href='https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css'>
    <script src='https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js'></script>
    <script src='https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js'></script>
    <link rel='stylesheet' href='../../highlight/styles/tomorrow-night.css'>
    <script src='../../highlight/highlight.pack.js'></script>
    <script>hljs.initHighlightingOnLoad();
    </script>
  </head>
  <body><div class='container'><div class='row'><header><h1 style='text-align: center'><a href='../../index.html'>Lisp Project of the Day</a></h1><h2 style='text-align: center'>cl-bert</h2></header><div class='col-md-12 col-md-offset-0'><p>This library implements a BERT serializer which is a part of the <a href="http://bert-rpc.org/">BERT-RPC</a>, invented and used inside the GitHub.</p>
<p>Let's try how it serializes Lisp structures:</p>
<pre><code class=' lisp'>POFTHEDAY&gt; (bert:encode 1)
#(131 97 1)
POFTHEDAY&gt; (bert:decode *)
1 (1 bit, #x1, #o1, #b1)

POFTHEDAY&gt; (bert:encode 100500)
#(131 98 0 1 136 148)
POFTHEDAY&gt; (bert:decode *)
100500 (17 bits, #x18894)

POFTHEDAY&gt; (bert:encode 3.1415926535)
#(131 70 64 9 33 251 96 0 0 0)
POFTHEDAY&gt; (bert:decode *)
3.1415927410125732d0

POFTHEDAY&gt; (bert:encode &quot;Hello Lisp World!&quot;)
#(131 107 0 17 72 101 108 108 111 32 76 105 115 112 32 87 111 114 108 100 33)
;; Ups!
POFTHEDAY&gt; (bert:decode *)
(72 101 108 108 111 32 76 105 115 112 32 87 111 114 108 100 33)

;; Let&#039;s try to recover our string from char codes
POFTHEDAY&gt; (coerce (mapcar #&#039;code-char *) &#039;string)
&quot;Hello Lisp World!&quot;</code></pre><p>How about more complex structures?</p>
<pre><code class=' lisp'>POFTHEDAY&gt; (bert:encode (list 1 2 3 4 5))
#(131 108 0 0 0 5 97 1 97 2 97 3 97 4 97 5 106)
POFTHEDAY&gt; (bert:decode *)
(1 2 3 4 5)

POFTHEDAY&gt; (bert:encode (vector 1 2 3 4 5))
; Debugger entered on #&lt;SB-PCL::NO-APPLICABLE-METHOD-ERROR {1002D21E43}&gt;

POFTHEDAY&gt; (bert:encode (list 42 &quot;Hello&quot; (list 3 4 5)))
#(131 108 0 0 0 3 97 42 107 0 5 72 101 108 108 111 108 0 0 0 3 97 3 97
  4 97 5 106 106)
POFTHEDAY&gt; (bert:decode *)
(42 (72 101 108 108 111) (3 4 5))</code></pre><p>To recap:</p>
<ul><li>there is no documentation;</li><li>there is a bug with strings support;</li><li>vectors aren&#039;t supported;</li><li>RPC is not implemented, but probably can be done on top of the cl-bert,   if these problems will be solved.</li></ul>
<p>Do you know other serialization libraries suitable for implementing a binary RPC protocol which will work for many programming languages?</p>
</div><footer class='clearfix'><hr><center><p>Brought to you by 40Ants under&nbsp;<a rel='license' href='http://creativecommons.org/licenses/by-sa/4.0/'><img alt='Creative Commons License' style='border-width:0' src='https://i.creativecommons.org/l/by-sa/4.0/88x31.png'></a></p></center></footer></div></div>
  </body>
</html>